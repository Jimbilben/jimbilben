% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/poststrat_multi_categorical.R
\name{poststrat_multi_categorical}
\alias{poststrat_multi_categorical}
\title{Poststratify Categorical MRP Predictions}
\usage{
poststrat_multi_categorical(
  input,
  variable_name,
  outcome_name = NULL,
  cat_levels = NULL,
  save_output = save_my_poststrat,
  return_state = set_state,
  .poststrat_tibble = set_my_poststrat,
  .poststrat_epred = set_my_epred,
  name_addition = ""
)
}
\arguments{
\item{input}{The object generated from \code{categorical_mrp}, containing the model and posterior predictions.}

\item{variable_name}{String. The name of the categorical variable being poststratified.}

\item{outcome_name}{Optional. A human-readable name for the outcome. Defaults to \code{variable_name}.}

\item{cat_levels}{A character vector specifying the levels of the categorical variable (e.g., \code{c("Approve", "Disapprove", "DK")}). Must be set for the function to work.}

\item{save_output}{Logical. If \code{TRUE}, saves the poststratification summaries to a file. Defaults to \code{save_my_poststrat}.}

\item{return_state}{Logical. Whether to include the "state" subgroup in the returned output. Defaults to \code{set_state}.}

\item{.poststrat_tibble}{A data frame containing the poststratification tibble. Defaults to \code{set_my_poststrat}.}

\item{.poststrat_epred}{A data frame containing the poststratification posterior predictions. Defaults to \code{set_my_epred}.}

\item{name_addition}{String, defaults to "" (i.e., nothing). Can provide a string to more uniquely identify what the file will be named as.}
}
\value{
A list of poststratification summaries, including:
  \itemize{
    \item \code{"population"}: The population-level summary.
    \item Subgroup summaries for each variable in \code{subgroups}.
  }
  If \code{return_state = FALSE}, the "state" subgroup summary is excluded.
}
\description{
Perform poststratification on the posterior predictive draws from a categorical MRP model across specified subgroups.
}
\details{
This function takes the posterior epred draws from \code{categorical_mrp} and performs poststratification
at both the population level and across specified subgroups. It applies the function
\code{mrp_party_categorical_poststrat} for stratification and formats the output with readable labels.

The function requires \code{cat_levels} to be defined to correctly order and arrange categorical choices.
Subgroups can be arranged in a logical order (e.g., for \code{"education_collapse"} or \code{"income_ces"}).
The output can optionally be saved as an RDS file for future use.
}
\note{
Requires the \code{brms} and \code{cmdstanr} packages.
Ensure that the \code{.poststrat_tibble} and \code{.poststrat_epred} arguments are properly formatted.
}
